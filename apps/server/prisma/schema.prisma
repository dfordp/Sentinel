generator client {
    provider        = "prisma-client-js"
    output          = ".././src/db/prisma"
    previewFeatures = ["relationJoins", "typedSql"]
    binaryTargets   = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
    provider  = "postgres"
    url       = env("DATABASE_URL")
    directUrl = env("DIRECT_DATABASE_URL")
}

model user {
    id              String   @id @default(ulid())
    provider_id     String   @unique
    name            String?
    email           String?
    github_username String?
    created_at      DateTime @default(now())
    updated_at      DateTime @updatedAt

    user_github_token user_github_token?
}

model user_github_token {
    id                   String   @id @default(ulid())
    user_id              String   @unique
    access_token         String
    refresh_token        String
    force_reauth         Boolean  @default(false)
    refresh_token_expire BigInt
    created_at           DateTime @default(now())
    updated_at           DateTime @updatedAt

    user user @relation(fields: [user_id], references: [id], onDelete: Cascade)
}
